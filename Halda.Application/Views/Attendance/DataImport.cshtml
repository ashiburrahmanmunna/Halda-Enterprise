@{
    ViewData["Title"] = "Home";
    Layout = "_LayoutAdmin";
}

<div class="container-fluid rounded-4 border border-muted p-2 mt-2 border-1">

    <div class="row mx-0 mb-2" style="background-color: #FFFFFF; border-radius: 5px;  box-shadow: 0px 0px 10px 0px #0000000D; ">

        <div class="p-2 col-12 d-flex align-items-center gap-2">
            <img alt="calander" src="~/User/img/calender.png" width="40px">
            <h5 class="header-text-4 mb-0">January 2023 </h5>

        </div>

    </div>

    <div class="row mx-0 " style="background-color: #FFFFFF; border-radius: 5px;  box-shadow: 0px 0px 10px 0px #0000000D; ">

        <div class="row mt-3 mb-3">
            <div class="col-12 col-md-12 mb-2 mb-md-0 d-flex align-items-center">
                <label for="leaveBalanceYear" style="font-size: 14px;" class="custom-label pt-2 me-2">From Date:</label>
                <input type="date" class="form-control me-2" id="leaveBalanceYear" value="2024-01-10" style="width: auto;">

                <label for="leaveBalanceYear" style="font-size: 14px;" class="custom-label pt-2 me-2">To Date: </label>
                <input type="date" class="form-control me-2" id="leaveBalanceYear" value="2024-01-10" style="width: auto;">

                <button type="button" class="btn" style="background-color: #4AA147; border-color: #4AA147; color: #FFFFFF; padding: px 8px; font-size: 16px;"> Load</button>
                <button type="button" class="btn ms-auto" style="background-color: #4AA147; border-color: #4AA147; color: #FFFFFF; padding: 8px; font-size: 16px;" data-bs-toggle="modal" data-bs-target="#uploadModal">
                    Data Import
                </button>
            </div>

            <div class="col-md-4 mb-2 col-12 d-flex align-items-center gap-2">
                <button id="select-all-button" class="btn mt-2" style="white-space: nowrap; border: 1px solid #D0D5DD;">
                    <input type="checkbox" id="select-all-checkbox" style="margin-right: 5px;"> Select All
                </button>
                <div class="input-group mt-2" style="border-radius: 8px; border: 1px solid #D0D5DD; background: #FAFAFAED; box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05); padding: 2px 3px;">
                    <input type="text" class="form-control border-0 shadow-none" placeholder="Search" aria-label="Search" style="background: transparent;">
                    <span class="input-group-text bg-transparent border-0" style="display: flex; align-items: center;">
                        <img alt="search" src="/User/img/search.png" width="20" style="height: auto;">
                    </span>
                </div>
            </div>

            <div class="col-12" id="DataImport"></div>
        </div>

    </div>

</div>

<!-- Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="uploadModalLabel">File Upload</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class="dropzone" style="border: 2px dashed #ddd; padding: 20px; margin-bottom: 15px;">
                    <p style="color: #4AA147;">Drag your file here</p>
                    <p>OR</p>
                    <input type="file" class="btn" style="background-color: #4AA147; color: #FFFFFF;" />
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var table = new Tabulator("#DataImport", {
            layout: "fitColumns",
            columns: [
                {
                    title: "<input type='checkbox' id='header-select-all'>", // Select All checkbox in the header
                    field: "select",
                    formatter: "rowSelection", // Row selection formatter
                    titleFormatter: "rowSelection", // Title formatter for the header checkbox
                    hozAlign: "center",
                    headerSort: false,
                    width: 50,
                    headerHozAlign: "center"
                },
                { title: "Employee Code", field: "empCode", width: 135 },
                { title: "Employee Name", field: "empName", width: 130 },
                { title: "Join Date", field: "joinDate", width: 105 },
                { title: "Designation", field: "designation", width: 120 },
                { title: "Department", field: "department", width: 105 },
                { title: "Section", field: "section", width: 125 },
                { title: "Mobile No", field: "mobileNo", width: 155 },
                { title: "Device No", field: "deviceNo", width: 135 },
                { title: "Punch Date", field: "punchDate", width: 135 },
                { title: "Time", field: "time", width: 135 },
            ],
            pagination: "local",
            paginationSize: 6,
            paginationButtonCount: 4,
            paginationSizeSelector: [10, 25, 50, 100],
            data: [
                { empCode: "E001", empName: "Alice Smith", joinDate: "2023-01-10", designation: "Manager", department: "Sales", section: "A", mobileNo: "1234567890", deviceNo: "D001", punchDate: "2024-09-27", time: "09:00 AM" },
                { empCode: "E002", empName: "Bob Johnson", joinDate: "2022-02-15", designation: "Developer", department: "IT", section: "B", mobileNo: "0987654321", deviceNo: "D002", punchDate: "2024-09-27", time: "09:05 AM" },
                { empCode: "E003", empName: "Carol Davis", joinDate: "2021-03-20", designation: "Designer", department: "Marketing", section: "C", mobileNo: "5678901234", deviceNo: "D003", punchDate: "2024-09-27", time: "09:10 AM" },
            ],
        });

        // Add event listener for the "Select All" button
        document.getElementById('select-all-button').addEventListener('click', function () {
            const checkbox = document.getElementById('select-all-checkbox');
            const isChecked = checkbox.checked; // Get the current state of the checkbox

            // Select or deselect all rows based on the checkbox state
            table.getRows().forEach(row => {
                if (isChecked) {
                    row.deselect(); // Deselect if currently checked
                } else {
                    row.select(); // Select if currently unchecked
                }
            });

            // Toggle the checkbox state
            checkbox.checked = !isChecked; // Update checkbox state
        });


    });

    document.getElementById("uploadButton").onclick = function () {
        const fileInput = document.getElementById("fileInput");
        if (fileInput.files.length > 0) {
            // Handle the file upload logic here
            alert("File uploaded: " + fileInput.files[0].name);
            $('#uploadModal').modal('hide'); // Close modal after upload
        } else {
            alert("Please select a file.");
        }
    };

</script>
    