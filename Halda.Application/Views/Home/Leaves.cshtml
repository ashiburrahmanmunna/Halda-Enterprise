@{
    ViewData["Title"] = "Home";
    Layout = "_LayoutAdmin";
}

<style>
    .nav-tabs .nav-link {
        color: #6c757d;
        border: none;
        font-weight: 500;
        border-radius: 0px;
        border-bottom: 2px solid transparent;
    }

        .nav-tabs .nav-link.active {
            color: #4AA147;
            font-weight: 600;
            border-radius: 0px;
            background-color: transparent;
            border-bottom: 3px solid #4AA147;
        }

    .input-group {
        border-radius: 8px;
        border: 1px solid #D0D5DD;
        background: #FAFAFAED;
        box-shadow: 0px 1px 2px rgba(16, 24, 40, 0.05);
        padding: 1px 3px;
    }

        .input-group .form-control {
            background: transparent;
        }

    .custom-select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right .75rem center;
        background-size: 16px 12px;
    }

    .btn-load {
        background-color: #5cb85c;
        border-color: #4cae4c;
        color: white;
    }

        .btn-load:hover {
            background-color: #449d44;
            border-color: #398439;
        }

    .custom-input, .custom-select {
        width: 100%;
        padding: 0.375rem 0.75rem;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
        background-color: #fff;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

        .custom-input:focus, .custom-select:focus {
            border-color: #80bdff;
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

    .custom-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
    }

    .form-row {
        display: flex;
        flex-wrap: wrap;
        margin-bottom: 1rem;
    }

    .form-col {
        flex: 1 1 100%;
        max-width: 25%;
        margin-bottom: 0.5rem;
    }

    .custom-label{
        font-size: 16px;
    }

    .tabulator .tabulator-header {
        border-top: none !important;
    }

        .tabulator .tabulator-header .tabulator-col {
            background-color: #F9F9F9 !important;
        }

    .offcanvas-body label {
        font-weight: 500;
    }

    .button-custom {
        background-color: #4AA147;
        color: white;
        display: inline-flex;
        align-items: center;
        gap: 0px;
        padding: 10px 20px;
        border: none;
        border-radius: 8px 8px 8px 8px;
        cursor: pointer;
        opacity: 1; /* Fully visible */
        transform: rotate(0deg); /* No rotation */
    }

        .button-custom i {
            margin-right: 5px; /* Space between icon and text */
        }
</style>

<div class="container-fluid rounded-4 border border-muted p-2 mt-2 border-1">
    <div class="row mx-0" style="background-color: #FFFFFF; border-radius: 5px; box-shadow: 0px 0px 10px 0px #0000000D;">
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button style="font-size: 14px;" class="nav-link active" data-bs-toggle="tab" data-bs-target="#leave-management" type="button" role="tab" aria-selected="true">Leave Management</button>
            </li>
            <li class="nav-item" role="presentation">
                <button style="font-size: 14px;" class="nav-link" data-bs-toggle="tab" data-bs-target="#leave-balance" type="button" role="tab" aria-selected="false">Leave Balance</button>
            </li>
            <li class="nav-item" role="presentation">
                <button style="font-size: 14px;" class="nav-link" data-bs-toggle="tab" data-bs-target="#leave-adjust" type="button" role="tab" aria-selected="false">Leave Adjust</button>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade show active" id="leave-management" role="tabpanel">
                <div class="row pt-4">
                    <div class="col-md-4  col-12 d-flex align-items-center gap-2">
                        <div class="input-group">
                            <input type="text" class="form-control border-0 shadow-none" placeholder="Search" aria-label="Search">
                            <span class="input-group-text bg-transparent border-0">
                                <img alt="search" src="/User/img/search.png" width="20">
                            </span>
                        </div>
                    </div>
                    <div class="col-md-8 d-flex justify-content-end">
                        <button type="button" class="btn btn-success " style="background-color: #4AA147; border-color: #4AA147; padding: px 8px; font-size: 16px;"><i class="ri-settings-6-line me-2"></i>Setup leaves</button>
                    </div>
                </div>
                <ul class="nav nav-tabs mt-2" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button style="font-size: 18px;" class="nav-link active" data-bs-toggle="tab" data-bs-target="#leave-request" type="button" role="tab" aria-selected="true">Leave Requests</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button style="font-size: 18px;" class="nav-link" data-bs-toggle="tab" data-bs-target="#leave-history" type="button" role="tab" aria-selected="false">Leave History</button>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="leave-request" role="tabpanel">
                        <div id="LeaveRequest"></div>
                        

                    </div>
                    <div class="tab-pane fade" id="leave-history" role="tabpanel">
                        <div id="LeaveHistory"></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="leave-balance" role="tabpanel">

                <div class="mt-2 p-2 mb-2" style="border: 0.67px solid #D4D4D4; box-shadow: 0px 0px 10px 0px #0000000D; border-radius: 8px;">
                    <div class="row mt-2 mb-2">
                        <div class="col-12 col-md-8 mb-2 mb-md-0 d-flex align-items-center">
                            <label for="leaveBalanceYear" class="custom-label pt-2 me-2">Leave balance year:</label>
                            <input type="date" class="form-control me-2" id="leaveBalanceYear" value="2024-01-10" style="width: auto;">
                            <label for="criteria" class="custom-label pt-2 me-2">Criteria</label>
                            <select class="form-select" id="criteria" style="width: auto;">
                                <option selected>All Employee</option>
                                <option value="active">Active Employees</option>
                                <option value="inactive">Inactive Employees</option>
                                <option value="on_leave">Employees on Leave</option>
                                <option value="terminated">Terminated Employees</option>
                            </select>
                        </div>

                       
                    </div>

                    <div class="row mb-3 mt-4 pb-2" style="border-bottom: 0.52px solid #E5E3E3">
                        <div class="col" style="border-right: 0.52px solid #E5E3E3">
                            <label for="employeeCode" class="custom-label" style="background-color: #F9F9F9; padding: 10px; display: block; text-align: center;">Employee Code</label>
                            <select class="form-select custom-select" id="employeeCode">
                                <option selected>Employee Code</option>
                                <option value="E001">E001</option>
                                <option value="E002">E002</option>
                                <option value="E003">E003</option>
                                <option value="E004">E004</option>
                                <option value="E005">E005</option>
                            </select>
                        </div>
                        <div class="col" style="border-right: 0.52px solid #E5E3E3">
                            <label for="department" class="custom-label" style="background-color: #F9F9F9; padding: 10px; display: block; text-align: center;">Department</label>
                            <select class="form-select custom-select" id="department">
                                <option selected>Department</option>
                                <option value="HR">HR</option>
                                <option value="IT">IT</option>
                                <option value="Sales">Sales</option>
                                <option value="Marketing">Marketing</option>
                            </select>
                        </div>
                        <div class="col" style="border-right: 0.52px solid #E5E3E3">
                            <label for="section" class="custom-label" style="background-color: #F9F9F9; padding: 10px; display: block; text-align: center;">Section</label>
                            <select class="form-select custom-select" id="section">
                                <option selected>Section</option>
                                <option value="A">Section A</option>
                                <option value="B">Section B</option>
                                <option value="C">Section C</option>
                            </select>
                        </div>
                        <div class="col" style="border-right: 0.52px solid #E5E3E3">
                            <label for="line" class="custom-label" style="background-color: #F9F9F9; padding: 10px; display: block; text-align: center;">Line</label>
                            <select class="form-select custom-select" id="line">
                                <option selected>Line</option>
                                <option value="1">Line 1</option>
                                <option value="2">Line 2</option>
                                <option value="3">Line 3</option>
                            </select>
                        </div>
                        <div class="col" >
                            <label for="floor" class="custom-label" style="background-color: #F9F9F9; padding: 10px; display: block; text-align: center;">Floor</label>
                            <select class="form-select custom-select" id="floor">
                                <option selected>Floor</option>
                                <option value="1">Floor 1</option>
                                <option value="2">Floor 2</option>
                                <option value="3">Floor 3</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-12 pb-2 d-flex justify-content-end">
                        <button type="button" class="btn btn-success " style="background-color: #4AA147; border-color: #4AA147; padding: px 8px; font-size: 16px;">Load</button>
                    </div>
                </div>

                <div class="mt-2  p-2 mb-2" style="border: 0.67px solid #D4D4D4; box-shadow: 0px 0px 10px 0px #0000000D; border-radius: 8px;">
                    <div class="row">
                        <div class="col-md-5 mb-2 col-12 d-flex align-items-center gap-2">
                            <button id="selectAllBtn" class="btn" style="white-space: nowrap; border: 1px solid #D0D5DD;">Select All</button>
                            <div class="input-group">
                                <input type="text" class="form-control border-0 shadow-none" placeholder="Search" aria-label="Search">
                                <span class="input-group-text bg-transparent border-0">
                                    <img alt="search" src="/User/img/search.png" width="20">
                                </span>
                            </div>
                        </div>

                        <!-- Second col-md-6 containing Font Awesome icons, aligned to the end -->
                        <div class="col-md-7 col-12 d-flex justify-content-end align-items-center gap-3">
                            <!-- Adjusted gap for uniform spacing -->
                            <i class="fas fa-download  px-3 py-2" style="cursor: pointer; font-size: 22px; color: #5C5E64; border: 0.52px solid #E5E3E3; padding: 5px; border-radius: 5px;"></i> <!-- Download Icon -->
                            <i class="fas fa-upload px-3 py-2" style="cursor: pointer; font-size: 22px; color: #5C5E64; border: 0.52px solid #E5E3E3; padding: 5px; border-radius: 5px;"></i>   <!-- Upload Icon -->
                            <i class="fas fa-file-pdf px-3 py-2" style="cursor: pointer; font-size: 22px; color: #5C5E64; border: 0.52px solid #E5E3E3; padding: 5px; border-radius: 5px;"></i> <!-- PDF Icon -->
                            <i class="fas fa-copy px-3 py-2" style="cursor: pointer; font-size: 22px; color: #5C5E64; border: 0.52px solid #E5E3E3; padding: 5px; border-radius: 5px;"></i>     <!-- Copy Icon -->
                        </div>
                    </div>
                    <div id="leaveBalanceTable"></div>
                </div>
                
            </div>
            <div class="tab-pane fade" id="leave-adjust" role="tabpanel">
                <div class="row pt-2 mb-2">
                    <div class="col-md-6 mb-2 col-12 d-flex align-items-center gap-2">
                        <button id="selectAllAdjustBtn" class="btn" style="white-space: nowrap; border: 1px solid #D0D5DD;">Select All</button>
                        <button id="" class="btn" style="white-space: nowrap; border: 1px solid #D0D5DD;">Delect All</button>
                        <div class="input-group">
                            <input type="text" class="form-control border-0 shadow-none" placeholder="Search" aria-label="Search">
                            <span class="input-group-text bg-transparent border-0">
                                <img alt="search" src="/User/img/search.png" width="20">
                            </span>
                        </div>
                    </div>

                    <!-- Second col-md-6 containing Font Awesome icons, aligned to the end -->
                    <div class="col-md-6 col-12 d-flex justify-content-end align-items-center gap-3">
                        <label for="leaveBalanceYear" class="custom-label pt-2 me-2">Date range:</label>
                        <input type="date" class="form-control" id="leaveBalanceYear" value="2024-01-10" style="width: auto;">
                        <button type="button" class="btn btn-success" style="background-color: #4AA147; border-color: #4AA147; padding: 8px; font-size: 16px;" data-bs-toggle="offcanvas" data-bs-target="#editLeaveAdjustOffcanvas" aria-controls="editLeaveAdjustOffcanvas">
                            <i class="fa-solid fa-plus me-1"></i>Create New
                        </button>
                    </div>
                </div>

                <div class="row m-1" style="box-shadow: 0px 0px 10.44px 0px #0000000D; border-radius: 8px;">
                    <div class="col-md-6 py-2 px-3 d-flex align-items-center">
                        <img alt="calendar" src="/User/img/calender.png" width="40px" style="margin-right: 8px;">
                        <h5 class="header-text-4 mb-0">Leave Adjust List</h5>
                    </div>
                    <div class="col-md-6 py-2 px-3 d-flex justify-content-end align-items-center gap-3">
                        <i class="fa-regular fa-file-pdf px-3 py-2" style="cursor: pointer; font-size: 22px; color: #5C5E64; border: 0.52px solid #E5E3E3; padding: 5px; border-radius: 5px;"></i>   <!-- Upload Icon -->
                        <i class="fa-solid fa-print px-3 py-2" style="cursor: pointer; font-size: 22px; color: #5C5E64; border: 0.52px solid #E5E3E3; padding: 5px; border-radius: 5px;"></i> <!-- PDF Icon -->
                    </div>
                    
                    <div id="leaveAdjustTable"></div>
                </div>
                
            </div>
        </div>
    </div>
</div>

<!-- Offcanvas -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="editLeaveAdjustOffcanvas" aria-labelledby="editLeaveAdjustOffcanvasLabel" style="width: 500px;">
    <div class="offcanvas-header">
        <h5 id="editLeaveAdjustOffcanvasLabel">Edit Leave Adjust</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <form>
            <div class="mb-3 row">
                <label for="typeSelect" class="form-label col-md-3">Type</label>
                <div class="col-md-6">
                    <select class="form-select" id="typeSelect">
                        <option value="">Select Type</option>
                        <option value="casual">Casual Leave</option>
                        <option value="sick">Sick Leave</option>
                        <option value="earned">Earned Leave</option>
                    </select>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="criteriaSelect" class="form-label col-md-3">Criteria</label>
                <div class="col-md-6">
                    <select class="form-select" id="criteriaSelect">
                        <option value="">Select Criteria</option>
                        <option value="one">Criteria One</option>
                        <option value="two">Criteria Two</option>
                        <option value="three">Criteria Three</option>
                    </select>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="designationSelect" class="form-label col-md-3">Designation</label>
                <div class="col-md-6">
                    <select class="form-select" id="designationSelect">
                        <option value="">Select Designation</option>
                        <option value="software">Software Engineer</option>
                        <option value="ux">UI/UX Designer</option>
                        <option value="hr">Human Resources</option>
                    </select>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="adjustToSelect" class="form-label col-md-3">Adjust To</label>
                <div class="col-md-6">
                    <select class="form-select" id="adjustToSelect">
                        <option value="">Select Adjustment</option>
                        <option value="none">No Adjustment</option>
                        <option value="increase">Increase Leave</option>
                        <option value="decrease">Decrease Leave</option>
                    </select>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="departmentSelect" class="form-label col-md-3">Department</label>
                <div class="col-md-6">
                    <select class="form-select" id="departmentSelect">
                        <option value="">Select Department</option>
                        <option value="software">Software Implementation</option>
                        <option value="business">Business Operation</option>
                        <option value="hr">Human Resources</option>
                        <option value="marketing">Marketing</option>
                    </select>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="adjustDate" class="form-label col-md-3">Adjust Date</label>
                <div class="col-md-6">
                    <input type="date" class="form-control" id="adjustDate">
                </div>
            </div>
            <div class="mb-3 row">
                <label for="replaceDate" class="form-label col-md-3">Replace Date</label>
                <div class="col-md-6">
                    <input type="date" class="form-control" id="replaceDate">
                </div>
            </div>
            <div class="mb-3 row">
                <label for="remark" class="form-label col-md-3">Remark</label>
                <div class="col-md-6">
                    <textarea class="form-control" id="remark" rows="3"></textarea>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="offcanvas">Cancel</button>
                <button type="submit" class="btn button-custom">Update</button>
            </div>
        </form>

    </div>
</div>

<script>

    const tabledata = [
        { "ID": 1, "Employee Name": "John Doe", image: "/User/img/robin.png", Designation: "Software Engineer", "Leave Date": "2024-09-25", Type: "Annual Leave", Status: "Pending", "Approved By": "Alice Smith", Application: "Online", Remarks: "On Time" },
        { "ID": 2, "Employee Name": "Jane Smith", image: "/User/img/person.png", Designation: "Project Manager", "Leave Date": "2024-09-24", Type: "Sick Leave", Status: "Pending", "Approved By": "Michael Brown", Application: "Paper", Remarks: "Submitted with doctor's note" },
        { "ID": 3, "Employee Name": "Emily Johnson", image: "/User/img/borhan.png", Designation: "Designer", "Leave Date": "2024-09-23", Type: "Casual Leave", Status: "Pending", "Approved By": "HR Department", Application: "Email", Remarks: "Insufficient balance" },
        { "ID": 4, "Employee Name": "Michael Brown", image: "/User/img/person_icon_3.png", Designation: "Data Analyst", "Leave Date": "2024-09-22", Type: "Maternity Leave", Status: "Pending", "Approved By": "Grace Williams", Application: "Online", Remarks: "Awaiting approval" },
        { "ID": 5, "Employee Name": "Sarah Davis", image: "/User/img/person_icon_2.png", Designation: "HR Specialist", "Leave Date": "2024-09-21", Type: "Work From Home", Status: "Pending", "Approved By": "John Doe", Application: "Online", Remarks: "Approved due to urgent work" }
    ];


    // Wait for the DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function () {
        // Create the Tabulator table after the DOM is loaded
        var table = new Tabulator("#LeaveRequest", {
            data: tabledata, // Load the data into the table
            layout: "fitColumns", // Fit columns to width of the table
            columns: [
                {
                    titleFormatter: "rowSelection", // Add select all checkbox in the header
                    headerHozAlign: "center",
                    hozAlign: "center",
                    formatter: "rowSelection",
                    cellClick: function (e, cell) {
                        cell.getRow().toggleSelect();
                    },
                    width: 50,
                    headerSort: false
                },
                { title: "ID", field: "ID", sorter: "number", width: 70, headerHozAlign: "center" },
                {
                    title: "Employee Name", field: "Employee Name", headerHozAlign: "center", width: 190, formatter: function (cell, formatterParams, onRendered) {
                        var row = cell.getRow().getData();
                        return `<div style="display: flex; align-items: center;">
                                    <img src="${row.image}" class="employee-image" alt="${row['Employee Name']}" style="width: 30px; height: 30px; border-radius: 50%;">
                                    <div class="employee-info" style="margin-left: 10px;">
                                        <span class="employee-name" style="text-align: start;">${row['Employee Name']}</span>
                                        <span class="employee-designation" style="text-align: start;">${row.Designation}</span>
                                    </div>
                                </div>`;
                    }
                },
                { title: "Leave Date", field: "Leave Date", formatter: "textarea", headerHozAlign: "center" },
                { title: "Type", field: "Type", headerHozAlign: "center" },
                {
                    title: "Status",
                    field: "Status",
                    width: 135,
                    headerHozAlign: "center",
                    formatter: function (cell, formatterParams, onRendered) {
                        const value = cell.getValue();
                        let backgroundColor = "";

                        if (value === "Rejected") {
                            backgroundColor = "#FFA08B"; // Red background for rejected
                        } else if (value === "Approved") {
                            backgroundColor = "#D3F6D2"; // Green background for approved
                        } else if (value === "Pending") {
                            backgroundColor = "#FFF9C4"; // Light yellow background for pending (or any color you prefer)
                        }

                        return `<span style="display: inline-block; padding: 4px 9px; background-color: ${backgroundColor}; border-radius: 7px;">${value}</span>`;
                    }
                },
                { title: "Approved By", field: "Approved By", headerHozAlign: "center" },
                { title: "Application", field: "Application", headerHozAlign: "center" },
            ],
            pagination: "local",
            paginationSize: 7,
            paginationButtonCount: 4,
            paginationSizeSelector: [10, 25, 50, 100],
            selectable: true, // Enable row selection
        });
    });

    const tabledataTWO = [
        { "ID": 1, "Employee Name": "John Doe", image: "/User/img/robin.png", Designation: "Software Engineer", "Leave Date": "2024-09-25", Type: "Annual Leave", Status: "Approved", "Approved By": "Alice Smith", Application: "Online", Remarks: "On Time" },
        { "ID": 2, "Employee Name": "Jane Smith", image: "/User/img/person.png", Designation: "Project Manager", "Leave Date": "2024-09-24", Type: "Sick Leave", Status: "Rejected", "Approved By": "Michael Brown", Application: "Paper", Remarks: "Submitted with doctor's note" },
        { "ID": 3, "Employee Name": "Emily Johnson", image: "/User/img/borhan.png", Designation: "Designer", "Leave Date": "2024-09-23", Type: "Casual Leave", Status: "Rejected", "Approved By": "HR Department", Application: "Email", Remarks: "Insufficient balance" },
        { "ID": 4, "Employee Name": "Michael Brown", image: "/User/img/person_icon_3.png", Designation: "Data Analyst", "Leave Date": "2024-09-22", Type: "Maternity Leave", Status: "Approved", "Approved By": "Grace Williams", Application: "Online", Remarks: "Awaiting approval" },
        { "ID": 5, "Employee Name": "Sarah Davis", image: "/User/img/person_icon_2.png", Designation: "HR Specialist", "Leave Date": "2024-09-21", Type: "Work From Home", Status: "Approved", "Approved By": "John Doe", Application: "Online", Remarks: "Approved due to urgent work" }
    ];


    // Wait for the DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function () {
        // Create the Tabulator table after the DOM is loaded
        var table = new Tabulator("#LeaveHistory", {
            data: tabledataTWO, // Load the data into the table
            layout: "fitColumns", // Fit columns to width of the table
            columns: [
                {
                    titleFormatter: "rowSelection", // Add select all checkbox in the header
                    headerHozAlign: "center",
                    hozAlign: "center",
                    formatter: "rowSelection",
                    cellClick: function (e, cell) {
                        cell.getRow().toggleSelect();
                    },
                    width: 50,
                    headerSort: false
                },
                { title: "ID", field: "ID", sorter: "number", width: 70, headerHozAlign: "center" },
                {
                    title: "Employee Name", field: "Employee Name", headerHozAlign: "center", width: 190, formatter: function (cell, formatterParams, onRendered) {
                        var row = cell.getRow().getData();
                        return `<div style="display: flex; align-items: center;">
                                        <img src="${row.image}" class="employee-image" alt="${row['Employee Name']}" style="width: 30px; height: 30px; border-radius: 50%;">
                                        <div class="employee-info" style="margin-left: 10px;">
                                            <span class="employee-name" style="text-align: start;">${row['Employee Name']}</span>
                                            <span class="employee-designation" style="text-align: start;">${row.Designation}</span>
                                        </div>
                                    </div>`;
                    }
                },
                { title: "Leave Date", field: "Leave Date", formatter: "textarea", headerHozAlign: "center" },
                { title: "Type", field: "Type", headerHozAlign: "center" },
                {
                    title: "Status",
                    field: "Status",
                    width: 135,
                    headerHozAlign: "center",
                    formatter: function (cell, formatterParams, onRendered) {
                        const value = cell.getValue();
                        let backgroundColor = "";

                        if (value === "Rejected") {
                            backgroundColor = "#FFA08B"; // Red background for rejected
                        } else if (value === "Approved") {
                            backgroundColor = "#D3F6D2"; // Green background for approved
                        } else if (value === "Pending") {
                            backgroundColor = "#FFF9C4"; // Light yellow background for pending (or any color you prefer)
                        }

                        return `<span style="display: inline-block; padding: 4px 9px; background-color: ${backgroundColor}; border-radius: 7px;">${value}</span>`;
                    }
                },
                { title: "Approved By", field: "Approved By", headerHozAlign: "center" },
                { title: "Application", field: "Application", headerHozAlign: "center" },
            ],
            pagination: "local",
            paginationSize: 7,
            paginationButtonCount: 4,
            paginationSizeSelector: [10, 25, 50, 100],
            selectable: true, // Enable row selection
        });
    });

    // Ensure only one active tab at a time for both primary and secondary tabs
    document.querySelectorAll('.nav-tabs .nav-link').forEach(tab => {
        tab.addEventListener('click', function () {
            const parent = this.closest('.nav-tabs');
            parent.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            this.classList.add('active');

            // Display the correct tab content
            const tabContent = document.querySelector(this.getAttribute('data-bs-target'));
            tabContent.classList.add('show', 'active');
            tabContent.siblings.forEach(sibling => sibling.classList.remove('show', 'active'));
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        var table = new Tabulator("#leaveBalanceTable", {
            data: [
                { employee_code: "GTRC114", employee_name: "Charles", cl: 14, sl: 4, el: 8, ml: 30, department: "Software Implementation", section: "Software" },
                { employee_code: "GTRC115", employee_name: "Abdul", cl: 12, sl: 3, el: 6, ml: 28, department: "Business Operation", section: "UI/UX Designer" },
                { employee_code: "GTRC116", employee_name: "Martha", cl: 10, sl: 5, el: 7, ml: 25, department: "Human Resources", section: "Recruitment" },
                { employee_code: "GTRC117", employee_name: "John", cl: 15, sl: 2, el: 10, ml: 20, department: "Marketing", section: "Digital Marketing" },
                { employee_code: "GTRC118", employee_name: "Sophia", cl: 16, sl: 6, el: 12, ml: 15, department: "Finance", section: "Accounts" },
                { employee_code: "GTRC119", employee_name: "Michael", cl: 8, sl: 3, el: 5, ml: 10, department: "Customer Support", section: "Technical Support" },
                { employee_code: "GTRC120", employee_name: "Aisha", cl: 9, sl: 4, el: 11, ml: 18, department: "Research & Development", section: "Product Design" }
            ],
            layout: "fitColumns",
            columns: [
                {
                    titleFormatter: "rowSelection", headerHozAlign: "center", // The header checkbox
                    hozAlign: "center",
                    headerSort: false,
                    cellClick: function (e, cell) {
                        cell.getRow().toggleSelect(); // Toggle row selection on cell click
                    },
                    formatter: "rowSelection", // Checkbox formatter for each row
                    width: 50,
                },
                { title: "Employee Code", field: "employee_code", headerHozAlign: "center" },
                { title: "Employee Name", field: "employee_name", headerHozAlign: "center" },
                { title: "CL", field: "cl", headerHozAlign: "center" },
                { title: "SL", field: "sl", headerHozAlign: "center" },
                { title: "EL", field: "el", headerHozAlign: "center" },
                { title: "ML", field: "ml", headerHozAlign: "center" },
                { title: "Department", field: "department", headerHozAlign: "center" },
                { title: "Section", field: "section", headerHozAlign: "center" },
            ],
            selectable: true, // Allows row selection
        });
        // Button for select/deselect all
        const selectAllBtn = document.getElementById('selectAllBtn');
        let isAllSelected = false;

        selectAllBtn.addEventListener('click', function () {
            if (isAllSelected) {
                table.deselectRow(); // Deselect all rows
                selectAllBtn.textContent = 'Select All';
            } else {
                table.selectRow(); // Select all rows
                selectAllBtn.textContent = 'Deselect All';
            }
            isAllSelected = !isAllSelected;
        });
        
    });

    document.addEventListener('DOMContentLoaded', function () {
        var table = new Tabulator("#leaveAdjustTable", {
            data: [
                { employee_code: "GTRC114", employee_name: "Charles", department: "Software Implementation", designation: "Software Engineer", leave_type: "Casual Leave", date: "2024-09-20", remark: "Family function", action: "Approve" },
                { employee_code: "GTRC115", employee_name: "Abdul", department: "Business Operation", designation: "UI/UX Designer", leave_type: "Sick Leave", date: "2024-09-18", remark: "Flu", action: "Approve" },
                { employee_code: "GTRC116", employee_name: "Martha", department: "Human Resources", designation: "Recruiter", leave_type: "Earned Leave", date: "2024-09-15", remark: "Vacation", action: "Approve" },
                { employee_code: "GTRC117", employee_name: "John", department: "Marketing", designation: "Digital Marketer", leave_type: "Maternity Leave", date: "2024-09-22", remark: "Childbirth", action: "Approve" },
                { employee_code: "GTRC118", employee_name: "Sophia", department: "Finance", designation: "Accountant", leave_type: "Casual Leave", date: "2024-09-19", remark: "Family event", action: "Approve" },
                { employee_code: "GTRC119", employee_name: "Michael", department: "Customer Support", designation: "Technical Support", leave_type: "Sick Leave", date: "2024-09-21", remark: "Back pain", action: "Approve" },
                { employee_code: "GTRC120", employee_name: "Aisha", department: "Research & Development", designation: "Product Designer", leave_type: "Vacation Leave", date: "2024-09-23", remark: "Travel", action: "Approve" }
            ],
            layout: "fitColumns",
            columns: [
                {
                    titleFormatter: "rowSelection", headerHozAlign: "center", // The header checkbox
                    hozAlign: "center",
                    headerSort: false,
                    cellClick: function (e, cell) {
                        cell.getRow().toggleSelect(); // Toggle row selection on cell click
                    },
                    formatter: "rowSelection", // Checkbox formatter for each row
                    width: 50,
                },
                { title: "Emp. Code", field: "employee_code", headerHozAlign: "center" },
                { title: "Name", field: "employee_name", headerHozAlign: "center" },
                { title: "Department", field: "department", headerHozAlign: "center" },
                { title: "Designation", field: "designation", headerHozAlign: "center" },
                { title: "Leave Type", field: "leave_type", headerHozAlign: "center" },
                { title: "Date", field: "date", headerHozAlign: "center" },
                { title: "Remark", field: "remark", headerHozAlign: "center" },
                {
                    title: "Action",
                    field: "action",
                    headerHozAlign: "center",
                    formatter: function (cell) {
                        // Create edit and delete buttons
                        return `
                            <div style="display: flex; justify-content: center; gap: 5px;">
                                <button class="edit-btn" style="border: none; background: none; cursor: pointer;">
                                        <i class="ri-edit-line" style="font-size: 20px;"></i>
                                </button>
                                <button class="delete-btn" style="border: none; background: none; cursor: pointer;">
                                            <i class="ri-delete-bin-6-line" style="font-size: 20px;"></i>
                                </button>
                            </div>
                        `;
                    },
                    cellClick: function (e, cell) {
                        // Handle edit and delete button clicks
                        const target = e.target;

                        if (target.classList.contains('edit-btn')) {
                            const rowData = cell.getRow().getData();
                            // Call your edit function here
                            alert(`Edit employee: ${rowData.employee_name}`);
                        }

                        if (target.classList.contains('delete-btn')) {
                            const rowData = cell.getRow().getData();
                            // Call your delete function here
                            if (confirm(`Are you sure you want to delete ${rowData.employee_name}?`)) {
                                table.deleteRow(cell.getRow());
                            }
                        }
                    }
                },
            ],
            selectable: true, // Allows row selection
        });

        // Button for select/deselect all
        const selectAllBtn = document.getElementById('selectAllAdjustBtn');
        let isAllSelected = false;

        selectAllBtn.addEventListener('click', function () {
            if (isAllSelected) {
                table.deselectRow(); // Deselect all rows
                selectAllBtn.textContent = 'Select All';
            } else {
                table.selectRow(); // Select all rows
                selectAllBtn.textContent = 'Deselect All';
            }
            isAllSelected = !isAllSelected;
        });
    });


</script>
